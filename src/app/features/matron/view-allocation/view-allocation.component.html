<div class="font-sans text-gray-800">
  <div class="max-w-6xl mx-auto px-4 py-6">
    <button class="btn btn-sm btn-secondary hover:underline mb-6 inline-block" [routerLink]="'/uhb/matron'">‚Üê Back
      to Applications</button>

    <div class="rounded-lg shadow-md p-6">
      @defer(when targetHostelRooms()){
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Application Details</h1>
        <span class="px-4 py-1 rounded-full text-sm font-semibold badge badge-warning text-neutral">
          {{ applicationDetails()?.status }}
        </span>
      </div>

      <div class="mb-8">
        <h3 class="text-lg font-semibold pb-2 border-b border-gray-200 mb-4">
          Personal Information
        </h3>
        <div class="grid md:grid-cols-2 gap-4 mb-6">
          <div>
            <span class="font-medium text-gray-600">Application ID:</span>
            <span class="ml-2">{{applicationDetails()?.applicationNo}}</span>
          </div>
          <div>
            <span class="font-medium text-gray-600">Application Period:</span>
            <span class="ml-2">{{applicationDetails()?.applicationPeriod}}</span>
          </div>
        </div>

        <div class="mb-8">
          <h3 class="text-lg font-semibold pb-2 border-b border-gray-200 mb-4">
            Needs Assessment Information
          </h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <span class="font-medium text-gray-600">Disabled:</span>
              <span class="ml-2">{{applicationDetails()?.disability}}</span>
            </div>
            <div>
              <span class="font-medium text-gray-600">Disability Details:</span>
              <span class="ml-2">{{applicationDetails()?.disabilityDetails || 'Not applicable'}}</span>
            </div>
            <div>
              <span class="font-medium text-gray-600">Accommodated within university before:</span>
              <span class="ml-2">{{applicationDetails()?.accommodatedBefore}}</span>
            </div>
            <div>
              <span class="font-medium text-gray-600">Accommodation Period:</span>
              <span class="ml-2">{{applicationDetails()?.accommodationPeriod || 'Not applicable'}}</span>
            </div>
          </div>
        </div>

        <div class="mb-8">
          <h3 class="text-lg font-semibold pb-2 border-b border-gray-200 mb-4">
            Accommodation Preferences
          </h3>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <span class="font-medium text-gray-600">Allocated Hostel:</span>
              <span class="ml-2">{{applicationDetails()?.preferredHostel}} Hostel Residence</span>
            </div>
          </div>
        </div>

        <div class="mb-8">
          <h3 class="text-lg font-semibold pb-2 border-b border-gray-200 mb-4">
            Room Allocation
          </h3>
          <div class="bg-blue-100 rounded-md p-6">
            <h3 class="text-lg font-semibold text-blue-600 mb-4">Allocate Room</h3>
            <form id="roomAllocationForm" [formGroup]="allocateRoomForm" (ngSubmit)="onSubmit()" #form="ngForm">
              <div class="grid md:grid-cols-2 gap-6 mb-4">
                <div>
                  <label for="roomNo" class="block mb-2 font-medium">Room Number:</label>
                  <select id="roomNo" formControlName="roomNo"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required>
                    <option value="" selected disabled>Select Room Number</option>
                    @for(room of targetHostelRooms(); track room){
                    <option value="{{room}}">{{room}}</option>
                    }
                  </select>
                  @if (allocateRoomForm.get('roomNo')?.invalid && form.submitted) {
                  <p class="text-red-500 text-xs ml-1">
                    Room Number is required.
                  </p>
                  }
                </div>
              </div>

              <app-button [buttonProps]="submitButtonProps" />
            </form>
            <app-toast [showToast]="toastVisible()" [styles]="toastStyles()" [alertStyle]="alertStyles()" [alertMessage]="alertMessage()" />
          </div>
        </div>
      </div>
      } @placeholder{
        <app-loading [styles]="loadingStyles" />
      }
    </div>
  </div>